<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            const api_host = 'http://test-436866578.us-east-1.elb.amazonaws.com'

            const produce = () => {
                console.log('produce');

                axios
                    .post(`${api_host}/api/produce`)
                    .then(getStock)
                    .then(setStockValue)
                    .catch(console.log);
            };

            const consume = () => {
                console.log('consume');

                axios
                    .post(`${api_host}/api/consume`)
                    .then(getStock)
                    .then(setStockValue)
                    .catch(console.log);
            };

            const getStock = () => {
                console.log('getStock');

                return axios.get(`${api_host}/api/stock`);
            };

            const setStockValue = (response) => {
                console.log(response.data.stock);
                document.getElementById('stock').value = response.data.stock;
            }
        </script>
    </head>
    <body>
        <div class="row">
            <div class="column">
                <p>PRODUCER</p>
                <span><button onclick="produce()">produce</button></span>
            </div>
            <div class="column">
                <p>STOCK</p>
                <span><input type="number" disabled id="stock" /></span>
            </div>
            <div class="column">
                <p>CONSUMER</p>
                <span><button onclick="consume()">consume</button></span>
            </div>
        </div>
    </body>
</html>
